#plan123
selectCityList=SELECT * FROM TRAVELCITY ORDER BY CT_NO
insertPlan=INSERT INTO PLAN VALUES(SEQ_P_NO.NEXTVAL, ?, ?, SYSDATE, ?, ?, ?, DEFAULT, 'Y')
selectPlanCurrval=SELECT SEQ_P_NO.CURRVAL FROM DUAL
insertPlanDetail=INSERT INTO PLANDETAIL VALUES (SEQ_PD_NO.NEXTVAL, ?, ?, ?, ?, ?, ?, 'Y')
selectPlanList=SELECT * FROM PLAN WHERE P_N_NO = ? AND P_STATUS = 'Y'
selectPlanDetail=SELECT P.P_NO, P.P_N_NO, P.P_TITLE, P.P_DATE, P.P_START_DATE, P.P_END_DATE, P_CITYS, P_PRIVATE,PD.PD_NO, PD.PD_START_CITY, PD.PD_START_DATE, PD.PD_END_CITY, PD.PD_END_DATE, PD.PD_TRANSFER FROM PLAN P JOIN PLANDETAIL PD ON (P.P_NO = PD.PD_P_NO) WHERE P.P_NO = ? AND PD.PD_STATUS = 'Y'  ORDER BY PD.PD_NO
updatePlan=UPDATE PLAN SET P_TITLE = ?, P_START_DATE = ?, P_END_DATE = ?, P_CITYS = ? WHERE P_NO = ? AND P_STATUS = 'Y'
updatePlanDetailStatusN=UPDATE PLANDETAIL SET PD_STATUS = 'N' WHERE PD_P_NO = ?
deletePlan=UPDATE PLAN SET P_STATUS = 'N' WHERE P_NO = ?
selectTopPlan=SELECT ROWNUM, PI_P_NO, P_TITLE, P_CITYS, CNT FROM (SELECT PI_P_NO,  P_TITLE, P_CITYS, COUNT(PI_P_NO) CNT FROM (SELECT PI.PI_P_NO, P.P_TITLE, P_CITYS FROM PLANINTEREST PI JOIN PLAN P ON (PI.PI_P_NO = P.P_NO) WHERE PI.PI_TYPE = ? AND P.P_STATUS = 'Y' AND P.P_PRIVATE = 'Y') GROUP BY PI_P_NO, P_TITLE, P_CITYS ORDER BY COUNT(PI_P_NO) DESC) WHERE ROWNUM BETWEEN 1 AND 3
selectTopCity=SELECT ROWNUM, CITY, STAR, CT_INFO, CT_COUNTRY FROM(SELECT CITY, AVG(EV_STAR) AS STAR, CT_INFO, CT_COUNTRY FROM(SELECT E.EV_STAR, CT.CT_NAME AS CITY, CT.CT_INFO, CT.CT_COUNTRY FROM EVAL E JOIN PLANDETAIL PD ON (E.EV_PD_NO = PD.PD_NO) JOIN TRAVELCITY CT ON (CT.CT_NO = PD.PD_START_CITY) ) GROUP BY CITY, CT_INFO, CT_COUNTRY ORDER BY AVG(EV_STAR) DESC) WHERE ROWNUM BETWEEN 1 AND 5
#seePlan_main
selectBestPlan=SELECT ROWNUM, PI_P_NO, P_TITLE, P_CITYS, CNT FROM (SELECT PI_P_NO,  P_TITLE, P_CITYS, COUNT(PI_P_NO) CNT FROM (SELECT PI.PI_P_NO, P.P_TITLE, P_CITYS FROM PLANINTEREST PI JOIN PLAN P ON (PI.PI_P_NO = P.P_NO) WHERE PI.PI_TYPE = ? AND P.P_STATUS = 'Y' AND P.P_PRIVATE = 'Y') GROUP BY PI_P_NO, P_TITLE, P_CITYS ORDER BY COUNT(PI_P_NO) DESC) WHERE ROWNUM BETWEEN 1 AND 3
selectMyNewsPlan=SELECT * FROM MEMBER M JOIN PLAN P ON(P.P_N_NO = M.M_NO) JOIN PLANINTEREST PI ON(PI.PI_GIVE_NO = M.M_NO) WHERE ROWNUM<=3 AND P_PRIVATE='Y' AND PI_TAKE_NO=? ORDER BY P.P_DATE DESC


